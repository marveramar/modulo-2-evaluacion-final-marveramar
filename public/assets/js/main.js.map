{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconsole.log('>> Ready :)');\n\nconst input = document.querySelector('#input');\nconst btn = document.querySelector('#btn');\nconst list = document.querySelector('#list');\nconst form = document.querySelector('#form');\nconst errorText = document.querySelector('.error')\nconst divFav = document.querySelector('.div')\n\n\nfunction getInfo() {\n    const inputValue = input.value\n    fetch(`http://api.tvmaze.com/search/shows?q=${inputValue}`)\n\n        .then(response => response.json())\n        .then(data => {\n            if (data.length > 0) {\n                errorText.classList.add('hidden')\n                paintSeries(data)\n                console.log(data)\n            }\n            else {\n                errorText.classList.remove('hidden')\n            }\n        })\n}\n\nconst paintSeries = (infoData) => {\n    let imageDefault = 'https://via.placeholder.com/210x295/ffffff/666666/?text=TV.'\n    for (let i = 0; i < infoData.length; i++) {\n        const name = infoData[i].show.name\n        const img = infoData[i].show.image\n        const id = 'X'\n        const elementLi = document.createElement('li');\n        const elementH2 = document.createElement('h2');\n        const content = document.createTextNode(`${name}`);\n        elementH2.appendChild(content);\n        elementLi.appendChild(elementH2);\n        const elementImage = document.createElement('img');\n        elementLi.appendChild(elementImage)\n        const elementId = document.createElement('button');\n        const IdContent = document.createTextNode(`${id}`);\n        elementId.appendChild(IdContent);\n        elementLi.appendChild(elementId);\n        elementLi.classList.add('li');\n        list.appendChild(elementLi);\n        if (img !== null) {\n            elementImage.src = infoData[i].show.image.medium;\n        }\n        else {\n            elementImage.src = imageDefault;\n        }\n        //ejecutar función para seleccionar favorito\n\n        elementLi.addEventListener('click', selectedFavourite)\n\n        //función para limpiar la ventana en nueva búsqueda\n\n        const clearWindow = () => {\n            list.innerHTML = ''\n        }\n        input.addEventListener('keydown', clearWindow)\n        id.addEventListener('click', deleteFav);\n    }\n}\n\n//función para seleccionar favorito\n\nlet array = []\nconst selectedFavourite = (event) => {\n    console.log(event.currentTarget)\n\n    const selected = event.currentTarget\n    event.currentTarget.closest('li').classList.toggle('favourite')\n    const object = {\n        \"info\": selected.innerHTML\n    }\n    array.push(object);\n    localStorage.setItem(\"listFav\", JSON.stringify(array))\n    divFav.appendChild(selected)\n}\n\n//función coger datos localStorage\nlet lastFavourites = '';\nconst getFavourites = () => {\n    console.log('funciona')\n    const myLocalStorage = localStorage.getItem(\"listFav\");\n    if (myLocalStorage !== null) {\n        lastFavourites = JSON.parse(myLocalStorage)\n        paintFav(lastFavourites);\n    }\n}\n//función pasar por el array q me traigo de local\n\nconst paintFav = (array) => {\n    for (let element of array) {\n        addLastVisited(element)\n\n    }\n}\n//función para pintar el objeto traido de local\n\nconst addLastVisited = (ob) => {\n    const elementLiFav = document.createElement('li');\n    elementLiFav.classList.add('favourite');\n    elementLiFav.innerHTML = ob.info;\n    divFav.appendChild(elementLiFav);\n\n}\n//función para borrar favorita\n\nconst deleteFav = () => {\n    event.currentTarget.closest('li').classList.remove('favourite')\n    event.currentTarget.closest('li').classList.add('hidden')\n\n    console.log('estoy on fire')\n\n\n}\n\n\n\n\n//función para que 'enter' imite 'click'\n\nconst enterKeyHandler = (event) => {\n    event.preventDefault();\n    getInfo()\n}\n\nwindow.addEventListener('load', getFavourites);\nform.addEventListener('submit', enterKeyHandler);\nbtn.addEventListener('click', getInfo);\n\n\n\n\n\n"]}