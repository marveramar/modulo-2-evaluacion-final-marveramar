"use strict";const input=document.querySelector("#input"),btn=document.querySelector("#btn"),list=document.querySelector("#list"),form=document.querySelector("#form"),errorText=document.querySelector(".error"),divFav=document.querySelector(".div");function getInfo(){const e=input.value;fetch(`http://api.tvmaze.com/search/shows?q=${e}`).then(e=>e.json()).then(e=>{e.length>0?(errorText.classList.add("hidden"),paintSeries(e),console.log(e)):errorText.classList.remove("hidden")})}const paintSeries=e=>{for(let t=0;t<e.length;t++){const n=e[t].show.name,a=e[t].show.image,r=e[t].show.id,o=document.createElement("li"),s=document.createElement("h2"),i=document.createTextNode(`${n}`);s.appendChild(i),o.appendChild(s);const d=document.createElement("img");o.appendChild(d);const l=document.createElement("span"),c=document.createTextNode(`${r}`);l.classList.add("hidden"),l.appendChild(c),o.appendChild(l),o.classList.add("li"),list.appendChild(o),d.src=null!==a?e[t].show.image.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV.",o.addEventListener("click",selectedFavourite);const u=()=>{list.innerHTML=""};input.addEventListener("keydown",u)}};let array=[];const selectedFavourite=e=>{console.log(e.currentTarget);const t=e.currentTarget;e.currentTarget.closest("li").classList.add("favourite");const n={info:t.innerHTML};array.push(n),localStorage.setItem("listFav",JSON.stringify(array)),divFav.appendChild(t)};let lastFavourites="";const getFavourites=()=>{const e=localStorage.getItem("listFav");null!==e&&(lastFavourites=JSON.parse(e),paintFav(lastFavourites))},paintFav=e=>{for(let t of e)addLastVisited(t)},addLastVisited=e=>{const t=document.createElement("li");t.classList.add("favourite"),t.innerHTML=e.info,divFav.appendChild(t)},enterKeyHandler=e=>{e.preventDefault(),getInfo()};window.addEventListener("load",getFavourites),form.addEventListener("submit",enterKeyHandler),btn.addEventListener("click",getInfo);